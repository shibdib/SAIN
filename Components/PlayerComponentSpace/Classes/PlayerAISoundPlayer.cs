using UnityEngine;

namespace SAIN.Components.PlayerComponentSpace.Classes
{
    public class PlayerAISoundPlayer : AIDataBase
    {
        public PlayerAISoundPlayer(SAINAIData aidata) : base(aidata)
        {
        }

        private float _soundFrequency => (IsAI ? SOUND_FREQUENCY_AI : SOUND_FREQUENCY_HUMAN);
        private float _lastSoundPower;
        private float _nextPlaySoundTime;

        private const float SOUND_FREQUENCY_HUMAN = 0.2f;
        private const float SOUND_FREQUENCY_AI = 0.75f;
        private const float SOUND_POWER_THRESH = 1.25f;

        public bool ShallPlayAISound(float power)
        {
            if (_nextPlaySoundTime < Time.time || 
                _lastSoundPower > power * SOUND_POWER_THRESH)
            {
                _nextPlaySoundTime = Time.time + _soundFrequency;
                _lastSoundPower = power;
                return true;
            }
            return false;
        }
    }
}